{"version":3,"sources":["script.js"],"names":["getResults","$","css","isPageLoading","currentPage","$section","html","ajax","dataType","url","currentUrl","data","page","value","searchResults","success","results","each","key","template","original_title","overview","release_date","slice","vote_average","poster_path","append","document","width","evenHeights","click","event","attr","this","$evenCards","_this","oddCard","next","height","focus","parent","addClass","focusout","val","removeClass","$input","length","blur","trigger","keypress","e","which","window","resize","scroll","top","scrollTop","innerHeight","windowTop","fadeIn","fadeOut","animate"],"mappings":"AAAA,YAgHA,SAAAA,cAEAC,EAAA,YAAAC,IAAA,aAAA,WAGAC,gBAIAC,cACAD,eAAA,EAGA,GAAAC,aACAC,SAAAC,KAAA,IAIAL,EAAAM,MACAC,SAAA,OACAC,IAAAC,WACAC,MACAC,KAAAR,YACAS,MAAAC,eAEAC,QAAA,SAAAC,GAGAf,EAAAgB,KAAAD,EAAAA,QAAA,SAAAE,EAAAP,GACA,GAAAQ,GACA,0DAEAR,EAAAS,eAAA,6DAGAT,EAAAU,SAAA,yDAIAV,EAAAW,aAAAC,MAAA,EAAA,GAAA,IAAAZ,EAAAW,aAAAC,MAAA,GAAA,IAAAZ,EAAAW,aAAAC,MAAA,EAAA,GACA,uBACAZ,EAAAa,aAAA,4HAEAb,EAAAc,YACA,qCAKApB,UAAAqB,OAAAP,KAIAlB,EAAA0B,UAAAC,QAAA,KACAC,cAIA5B,EAAA,eAAA6B,MAAA,SAAAC,GACA9B,EAAA,gBAAA+B,KAAA,MAAA/B,EAAAgC,MAAAtB,KAAA,UAIAR,eAAA,EACAF,EAAA,YAAAC,IAAA,aAAA,cAyDA,QAAA2B,eAEA,GAAAK,GAAAjC,EAAA,aAGAiC,GAAAjB,KAAA,WAGA,GAAAkB,GAAAlC,EAAAgC,MACAG,EAAAD,EAAAE,MAIAD,GAAAE,SAAAH,EAAAG,SACAH,EAAAG,OAAAF,EAAAE,UAEAF,EAAAE,OAAAH,EAAAG,YAvPA,GAAAlC,aAAA,EACAM,WAAA,GACAI,cAAA,GACAX,eAAA,EACAE,SAAAJ,EAAA,UAMAA,GAAA,cAAAsC,MAAA,WAEAtC,EAAAgC,MAAAO,SAAAC,SAAA,4BAGAxC,EAAA,cAAAyC,SAAA,WAEA,KAAAzC,EAAAgC,MAAAU,OACA1C,EAAAgC,MAAAO,SAAAI,YAAA,gBAEA3C,EAAAgC,MAAAO,SAAAI,YAAA,eASA3C,EAAA,iBAAA6B,MAAA,SAAAC,GAGA,GAAAc,GAAA5C,EAAA,eACAa,eAAA+B,EAAAF,MAGA7B,cAAAgC,OAAA,IAGAD,EAAAF,IAAA,IACAE,EAAAE,OAGArC,WAAA,SAGAN,YAAA,EAEAJ,WAAAc,kBASAb,EAAA,eAAA6B,MAAA,WAGA7B,EAAA,eAAA8C,OAGA3C,YAAA,EAEAM,WAAA,YAEAV,eAOAC,EAAA,eAAA+C,QAAA,SAKA/C,EAAA,gBAAAgD,SAAA,SAAAC,GACA,GAAAhC,GAAAgC,EAAAC,KACA,IAAA,IAAAjC,EAAA,CAEA,GAAA2B,GAAA5C,EAAA,eACAa,eAAA+B,EAAAF,MAGA7B,cAAAgC,OAAA,IAGAD,EAAAF,IAAA,IACAE,EAAAE,OAGArC,WAAA,SAGAN,YAAA,EAEAJ,WAAAc,mBA0FAb,EAAAmD,QAAAC,OAAA,WACApD,EAAA0B,UAAAC,QAAA,KACAC,gBASA5B,EAAAmD,QAAAE,OAAA,WAEA,GAAAC,GAAAtD,EAAAmD,QAAAI,YAAAJ,OAAAK,YACAC,EAAAzD,EAAA0B,UAAAW,QAGAiB,GAAA,KAAAG,GACA1D,aAGAC,EAAAgC,MAAAuB,YAAA,IACAvD,EAAA,aAAA0D,SAEA1D,EAAA,aAAA2D,YAOA3D,EAAA,aAAA6B,MAAA,WAIA,MAHA7B,GAAA,cAAA4D,SACAL,UAAA,GACA,MACA","file":"script.js","sourcesContent":["'use strict'\r\n\r\nvar currentPage = 0; // current page loaded\r\nvar currentUrl = ''; // url to server backend\r\nvar searchResults = '' // input from search\r\nvar isPageLoading = false; // is page currently loading\r\nvar $section = $('section')\r\n\r\n\r\n/*\r\n* search input animations\r\n */\r\n$(\".mat-input\").focus(function(){\r\n    // when focused add white colors\r\n    $(this).parent().addClass(\"is-active is-completed\")\r\n})\r\n\r\n$(\".mat-input\").focusout(function(){\r\n    // on focus out if no input then remove completed css\r\n    if($(this).val() === \"\")\r\n        $(this).parent().removeClass(\"is-completed\")\r\n    // always remove active class on focus out\r\n    $(this).parent().removeClass(\"is-active\")\r\n})\r\n\r\n\r\n\r\n\r\n/*\r\n* if search button clicked then get input data and get moviedb results\r\n */\r\n$(\"#searchButton\").click( function (event) {\r\n\r\n    // get input value\r\n    var $input = $(\"#searchInput\");\r\n    searchResults = $input.val();\r\n    \r\n    // if input is not blank then call api\r\n    if (searchResults.length > 0) {\r\n\r\n        // clear and unfocus input\r\n        $input.val('');\r\n        $input.blur();\r\n\r\n        // set url\r\n        currentUrl = 'search'\r\n\r\n        // reset current search results page\r\n        currentPage = 0;\r\n\r\n        getResults(searchResults);\r\n    }\r\n})\r\n\r\n\r\n\r\n/*\r\n * on click, get now playing movies\r\n */\r\n$('#nowPlaying').click( function () {\r\n\r\n    // unfocus button\r\n    $('#nowPlaying').blur();\r\n\r\n    // reset pages\r\n    currentPage = 0;\r\n    // set url\r\n    currentUrl = 'topmovies';\r\n\r\n    getResults()\r\n\r\n})\r\n\r\n/*\r\n * trigger click \r\n */\r\n$('#nowPlaying').trigger('click')\r\n\r\n/*\r\n *  on enter down on input search movies\r\n */\r\n$('#searchInput').keypress( function (e) {\r\n    var key = e.which;\r\n    if (key == 13) {\r\n        // get input value clear it\r\n        var $input = $(\"#searchInput\");\r\n        searchResults = $input.val();\r\n        \r\n        // if input is not blank then call api\r\n        if (searchResults.length > 0) {\r\n\r\n            // clear and unfocus input\r\n            $input.val('');\r\n            $input.blur();\r\n\r\n            // set url\r\n            currentUrl = 'search'\r\n\r\n            // reset current search results page\r\n            currentPage = 0;\r\n\r\n            getResults(searchResults);\r\n        }  \r\n    }\r\n});\r\n\r\n\r\n\r\n/*\r\n * get results from server and display them\r\n * @param String - value of search input\r\n */\r\nfunction getResults () {\r\n\r\n    $('#loading').css('visibility', 'visible');\r\n\r\n    // if page already loading results then don't start AJAX\r\n    if (isPageLoading) {\r\n        return\r\n    }\r\n\r\n    currentPage++;\r\n    isPageLoading = true\r\n\r\n    // if first page then clear results\r\n    if ( currentPage == 1 ) {\r\n        $section.html('')\r\n    }\r\n\r\n    // get movie results from server\r\n    $.ajax({\r\n        dataType: \"json\",\r\n        url: currentUrl,\r\n        data: {\r\n            page: currentPage,\r\n            value: searchResults\r\n        },\r\n        success: function (results) {\r\n\r\n            // for each search result create a card and append to section\r\n            $.each(results.results, function (key, data) {\r\n                var template = \r\n                '<div class=\"card z-depth\">' +\r\n                    '<div class=\"card-header\">' +\r\n                         '<h3>' + data.original_title + '</h3>' +\r\n                    '</div>'+\r\n                    '<div class=\"card-body\">'+\r\n                        '<p class=\"text-justify\">' + data.overview + '</p>' +\r\n                    '</div>'+\r\n                    '<div class=\"card-footer\">' +\r\n                        '<div>Release Date: ' + \r\n                        data.release_date.slice(5,7) + '/' + data.release_date.slice(8) + '/' + data.release_date.slice(0,4) + \r\n                        '</div>' +\r\n                        '<span>Rating: ' + data.vote_average + '/10</span>' +\r\n                        '<span><a class=\"poster-btn\" data-toggle=\"modal\" data-target=\"#myModal\" data-img=' +\r\n                        'http://image.tmdb.org/t/p/w500/' + data.poster_path +\r\n                        '>Show Poster</a></span>' +\r\n                    '</div>' +\r\n                '</div>'\r\n\r\n                // append the new card\r\n                $section.append(template);\r\n            })\r\n\r\n            // // even out height of cards if in md responsive size\r\n            if($(document).width() > 992) {\r\n                evenHeights();\r\n            }\r\n\r\n            // on click get image url and insert into modal\r\n            $('.poster-btn').click( function (event) {\r\n                $('#modal-image').attr('src', $(this).data('img'))\r\n            })\r\n\r\n            // page is done loading\r\n            isPageLoading = false;\r\n            $('#loading').css('visibility', 'hidden');\r\n\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n* on resize of window check serach result card heights\r\n */\r\n$(window).resize(function() {\r\n    if($(document).width() > 992) {\r\n        evenHeights();\r\n    }\r\n            \r\n})\r\n\r\n\r\n/*\r\n * on scroll check for pagination and scroll to top button\r\n */\r\n$(window).scroll( function () {\r\n\r\n    var top = $( window ).scrollTop() + window.innerHeight\r\n    var windowTop = $( document ).height()\r\n\r\n    // if top of window close to bottom of document then trigger ajax call\r\n    if ( top + 100 >= windowTop ) {\r\n        getResults()  \r\n    }\r\n\r\n    if ($(this).scrollTop() > 500) {\r\n        $('.scrollup').fadeIn();\r\n\t} else {\r\n\t\t$('.scrollup').fadeOut();\r\n\t}\r\n        \r\n})\r\n\r\n\r\n// button event to scroll up\r\n$('.scrollup').click( function () {\r\n    $(\"html, body\").animate({\r\n        scrollTop: 0\r\n    }, 600);\r\n    return false;\r\n});\r\n\r\n\r\n/*\r\n* evens out height of cards on same row\r\n */\r\nfunction evenHeights () {\r\n    // get all even indexed cards\r\n    var $evenCards = $('.card:even');\r\n\r\n    // for each even card, check height and compare to next sibiling\r\n    $evenCards.each( function () {\r\n\r\n        // save element and its next sibiling\r\n        var _this = $(this);\r\n        var oddCard = _this.next();\r\n\r\n        // if next sibiling is taller then set even card to \r\n        // that height else set sibiling to even card height\r\n        if ( oddCard.height() > _this.height() ) {\r\n            _this.height( oddCard.height() );\r\n        } else {\r\n            oddCard.height( _this.height() );\r\n        }\r\n\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}